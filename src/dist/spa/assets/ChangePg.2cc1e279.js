import{_ as p,m as g,r as n,q as w,s as v,x as u,t as l,w as d,ah as _,Q as i,ak as m,d as f}from"./index.09418d5b.js";import{Q as y}from"./QForm.22433d66.js";import{u as b}from"./use-quasar.d2f4bb59.js";import{api as h}from"./axios.5b59bc96.js";const x={data(){const c=b(),s=g(),r=n(""),a=n(""),o=n("");return{recovery_code:r,password:a,match_password:o,isPwd:n(!0),async onSubmit(){const{data:t}=await h.post("/api/auth/change",{recovery_code:r.value,password:a.value,match_password:o.value,recover_token:localStorage.getItem("recover_token")});localStorage.removeItem("recover_token"),t.error===null?c.dialog({title:"OK",message:t.message}).onOk(()=>{s.push("/signin")}):c.dialog({title:"Error",message:t.message,color:"negative",buttons:["Ok"]})},onReset(){r.value="",a.value="",o.value=""}}}},V={class:"row q-pa-md justify-center"},k={class:"col-xs-10 col-sm-6 col-md-5 col-lg-3 col-xl-2"},q=u("h6",{class:"q-my-md"},"Datos de acceso",-1);function M(c,s,r,a,o,t){return w(),v("div",V,[u("div",k,[l(y,{onSubmit:o.onSubmit,onReset:o.onReset,class:"q-gutter-lg q-mt-md"},{default:d(()=>[q,l(m,{filled:"",modelValue:o.recovery_code,"onUpdate:modelValue":s[0]||(s[0]=e=>o.recovery_code=e),label:"Codigo de recuperacion *",hint:"Fue enviado a tu email","lazy-rules":"",rules:[e=>e&&e.length==8||"Ingresa un c\xF3digo de recuperacion valido"]},null,8,["modelValue","rules"]),l(m,{modelValue:o.password,"onUpdate:modelValue":s[2]||(s[2]=e=>o.password=e),filled:"",type:o.isPwd?"password":"text",hint:"Minimo 6, Maximo 20 caracteres",label:"Nuevo password *","lazy-rules":"",rules:[e=>e&&e.length>5||"Minimo 6 caracteres",e=>e.length<21||"Maximo 20 caracteres"]},{append:d(()=>[l(f,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[1]||(s[1]=e=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(m,{modelValue:o.match_password,"onUpdate:modelValue":s[3]||(s[3]=e=>o.match_password=e),type:"password",filled:"",hint:"Minimo 6, Maximo 20 caracteres",label:"Repite el password *","lazy-rules":"",rules:[e=>e&&e.length>5||"Minimo 6 caracteres",e=>e.length<21||"Maximo 20 caracteres",e=>e==o.password||"Los passwords no coinciden"]},null,8,["modelValue","rules"]),u("div",null,[l(i,{label:"Submit",type:"submit",color:"amber-10"}),l(i,{label:"Reset",type:"reset",color:"black",class:"q-ml-sm"})])]),_:1},8,["onSubmit","onReset"]),l(_,{class:"q-my-lg"}),l(i,{to:"/signin",icon:"person",flat:"",label:"Login",class:"col-4 q-mt-xs"}),l(i,{to:"/",icon:"close",flat:"",label:"Cancelar",class:"col-4 q-my-md"})])])}var C=p(x,[["render",M]]);export{C as default};
